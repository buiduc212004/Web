<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foodieland Admin Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="admin.css">
    <script src="customer-handler.js"></script>
    <script src="image-utils.js" type="module"></script>
</head>
<body>
    <div class="admin-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo-container">
                <img src="../image/Foodieland.png" alt="Foodieland Logo" class="logo">
            </div>
            <div class="admin-info">
                <img src="../image/Banner.png" alt="Admin Avatar" class="admin-avatar">
                <div class="admin-details">
                    <h3>Admin User</h3>
                    <p>Admin</p>
                </div>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li class="nav-item active">
                        <a href="#dashboard">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#orders">
                            <i class="fas fa-shopping-bag"></i>
                            <span>Orders</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#products">
                            <i class="fas fa-utensils"></i>
                            <span>Products</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#categories">
                            <i class="fas fa-list"></i>
                            <span>Categories</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#promotions">
                            <i class="fas fa-gift"></i>
                            <span>Promotions</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#customers">
                            <i class="fas fa-person"></i>
                            <span>Customers</span>
                        </a>
                    </li>
                    <li class="nav-item" style="display:none">
                        <a href="#images">
                            <i class="fas fa-images"></i>
                            <span>Image Manager</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="Home.html">
                            <i class="fas fa-home"></i>
                            <span>Go to Website</span>
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <a href="signin.html" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </a>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">

            <!-- Dashboard Content -->
            <div class="dashboard-content" id="dashboard">
                <h1 class="page-title">Dashboard</h1>
                
                <!-- Stats Cards -->
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-icon orange">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="stat-details">
                            <h3>Total Orders</h3>
                            <p class="stat-number">1,258</p>
                            <p class="stat-change positive">+15.3% <span>vs last month</span></p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="stat-details">
                            <h3>Total Revenue</h3>
                            <p class="stat-number">458.5M đ</p>
                            <p class="stat-change positive">+12.7% <span>vs last month</span></p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon blue">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-details">
                            <h3>Total Customers</h3>
                            <p class="stat-number">3,652</p>
                            <p class="stat-change positive">+8.2% <span>vs last month</span></p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon red">
                            <i class="fas fa-utensils"></i>
                        </div>
                        <div class="stat-details">
                            <h3>Total Products</h3>
                            <p class="stat-number">186</p>
                            <p class="stat-change positive">+3.8% <span>vs last month</span></p>
                        </div>
                    </div>
                </div>

                <!-- Recent Orders -->
                <div class="recent-orders-container">
                    <div class="section-header">
                        <h2>Recent Orders</h2>
                        <a href="#orders" class="view-all-btn" id="view-all-orders">View All <i class="fas fa-arrow-right"></i></a>
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="recent-orders-table">
                            <thead>
                                <tr>
                                    <th>Order ID</th>
                                    <th>Customer ID</th>
                                    <th>Restaurant ID</th>
                                    <th>Promotion ID</th>
                                    <th>Category</th>
                                    <th>Total Price</th>
                                    <th>Status</th>
                                    <th>Date/Time</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Orders will be loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Top Products -->
                <div class="top-products-container">
                    <div class="section-header">
                        <h2>Top Products</h2>
                        <a href="#products" class="view-all-btn" id="view-all-products">View All <i class="fas fa-arrow-right"></i></a>
                    </div>
                    <div class="products-grid" id="top-products-grid">
                        <!-- Products will be loaded dynamically -->
                    </div>
                </div>
            </div>

            <!-- Orders Content -->
            <div class="content-section hidden" id="orders">
                <div class="orders-management-header">
                    <h1>Orders Management</h1>
                </div>
                
                <div class="filters-container">
                    <div class="filter-group">
                        <span class="filter-label">Filter by Status:</span>
                        <select class="status-filter-select" id="order-status-filter">
                            <option value="all">All</option>
                            <option value="completed">Completed</option>
                            <option value="processing">Processing</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <span class="filter-label">Date Range:</span>
                        <div class="date-range-inputs">
                            <input type="date" id="order-date-from" class="date-input" placeholder="Start Date">
                            <span class="date-separator">to</span>
                            <input type="date" id="order-date-to" class="date-input" placeholder="End Date">
                        </div>
                    </div>
                    
                    <div class="filter-actions">
                        <button class="apply-filters-btn" id="apply-order-filters">
                            <i class="fas fa-filter"></i>
                            Apply Filters
                        </button>
                        <button class="reset-filters-btn" id="reset-order-filters">
                            <i class="fas fa-undo"></i>
                            Reset
                        </button>
                    </div>
                </div>
                
                <div class="table-container">
                    <table class="data-table" id="orders-table">
                        <thead>
                            <tr>
                                <th><input type="checkbox" class="select-all-checkbox"></th>
                                <th>Order ID</th>
                                <th>Customer ID</th>
                                <th>Restaurant ID</th>
                                <th>Promotion ID</th>
                                <th>Category</th>
                                <th>Total Price</th>
                                <th>Status</th>
                                <th>Date/Time</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Orders will be loaded dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Products Content -->
            <div class="content-section hidden" id="products">
                <h1 class="page-title">Products Management</h1>
                
                <div class="filter-container">
                    <div class="filter-group">
                        <label for="product-type-filter">Filter by Type:</label>
                        <select class="filter-select" id="product-type-filter">
                            <option value="all">All Types</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <button class="filter-btn btn-primary" id="add-product-btn">
                            <i class="fas fa-plus"></i>
                            Add New Product
                        </button>
                    </div>
                </div>
                
                <div class="products-grid" id="products-grid">
                    <!-- Products will be loaded dynamically -->
                </div>
                <div id="products-pagination" class="pagination"></div>
            </div>

            <!-- Categories Content -->
            <div class="content-section hidden" id="categories">
                <h1 class="page-title">Categories Management</h1>
                
                <div class="action-bar">
                    <button class="add-new-btn" id="add-category-btn">
                        <i class="fas fa-plus"></i>
                        Add New Category
                    </button>
                    <div class="filter-group">
                        <label for="category-status-filter">Status:</label>
                        <select id="category-status-filter">
                            <option value="all">All</option>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="category-search">Search:</label>
                        <input type="text" id="category-search" placeholder="Search by name...">
                    </div>
                </div>
                
                <div class="table-container">
                    <table class="data-table" id="categories-table">
                        <thead>
                            <tr>
                                <th>
                                    <input type="checkbox" class="select-all-checkbox">
                                </th>
                                <th>Category ID</th>
                                <th>Name</th>
                                <th>Products</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Categories will be loaded dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Promotions Content -->
            <div class="content-section hidden" id="promotions">
                <h1 class="page-title">Promotions Management</h1>
                
                <div class="action-bar">
                    <button class="add-new-btn" id="add-promotion-btn">
                        <i class="fas fa-plus"></i>
                        Add New Promotion
                    </button>
                    <div class="filter-group">
                        <select class="filter-select" id="promotion-status-filter">
                            <option value="all">All Status</option>
                            <option value="Hoat Dong">Active</option>
                            <option value="Khong Hoat Dong">Expired</option>
                            <option value="scheduled">Scheduled</option>
                        </select>
                    </div>
                    <div class="search-container">
                        <input type="text" placeholder="Search promotions..." id="promotion-search">
                        <i class="fas fa-search"></i>
                    </div>
                </div>
                
                <div class="table-container promotion-table-container">
                    <table class="data-table" id="promotions-table">
                        <thead>
                            <tr>
                                <th>
                                    <input type="checkbox" class="select-all-checkbox">
                                </th>
                                <th>Promo Code</th>
                                <th>Description</th>
                                <th>Discount</th>
                                <th>Start Date</th>
                                <th>End Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Promotions will be loaded dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Images Content -->
            <div class="content-section hidden" id="images" style="display:none">
                <div class="image-management-header">
                    <h1>Image Manager</h1>
                </div>
                
                <div class="filters-container">
                    <div class="filter-group">
                        <span class="filter-label">Filter by Type:</span>
                        <select class="status-filter-select" id="image-type-filter">
                            <option value="all">All Types</option>
                            <option value="Food">Food</option>
                            <option value="Restaurant">Restaurant</option>
                            <option value="Category">Category</option>
                            <option value="Banner">Banner</option>
                            <option value="Profile">Profile</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <span class="filter-label">Date Range:</span>
                        <div class="date-range-inputs">
                            <input type="date" id="image-start-date" class="date-input" placeholder="Start Date">
                            <span class="date-separator">to</span>
                            <input type="date" id="image-end-date" class="date-input" placeholder="End Date">
                        </div>
                    </div>
                    
                    <div class="filter-actions">
                        <button class="apply-filters-btn" id="apply-image-filters">
                            <i class="fas fa-filter"></i>
                            Apply Filters
                        </button>
                        <button class="reset-filters-btn" id="reset-image-filters">
                            <i class="fas fa-undo"></i>
                            Reset Filters
                        </button>
                    </div>
                </div>
                
                <div class="action-bar">
                    <div class="search-container">
                        <input type="text" id="image-search" placeholder="Search images...">
                        <i class="fas fa-search"></i>
                    </div>
                    <button class="add-new-btn" id="upload-new-image-btn">
                        <i class="fas fa-plus"></i>
                        Upload New Image
                    </button>
                </div>
                
                <div class="image-gallery-container">
                    <div class="image-grid" id="image-grid">
                        <!-- Images will be loaded here dynamically -->
                    </div>
                </div>
                
                <div class="pagination" id="image-pagination">
                    <!-- Pagination will be generated dynamically -->
                </div>
                
                <!-- Image Upload Modal -->
                <div class="modal" id="image-upload-modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>Upload New Image</h3>
                            <button class="close-modal" id="close-image-modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <form id="image-upload-form">
                                <div class="form-group">
                                    <label for="image-file">Select Image</label>
                                    <input type="file" id="image-file" name="image" accept="image/*" required>
                                    <div class="image-preview">
                                        <img id="image-preview-img" src="../image/placeholder.png" alt="Preview">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="reference-type">Reference Type</label>
                                    <select id="reference-type" name="referenceType" required>
                                        <option value="">Select type</option>
                                        <option value="Food">Food</option>
                                        <option value="Restaurant">Restaurant</option>
                                        <option value="Category">Category</option>
                                        <option value="Banner">Banner</option>
                                        <option value="Profile">Profile</option>
                                    </select>
                                </div>
                                
                                <div class="form-group" id="reference-id-group">
                                    <label for="reference-id">Reference ID</label>
                                    <select id="reference-id" name="referenceId" required>
                                        <option value="">Select Reference Type first</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <div class="checkbox-container">
                                        <input type="checkbox" id="is-main" name="isMain">
                                        <label for="is-main">Set as Main Image</label>
                                    </div>
                                    <p class="help-text">If checked, this will be the main image for the selected reference.</p>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button class="btn-secondary" id="cancel-upload-btn">Cancel</button>
                            <button class="btn-primary" id="submit-upload-btn">Upload Image</button>
                        </div>
                    </div>
                </div>
                
                <!-- Image Detail Modal -->
                <div class="modal" id="image-detail-modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>Image Details</h3>
                            <button class="close-modal" id="close-detail-modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="image-detail-container">
                                <div class="image-detail-preview">
                                    <img id="detail-image" src="" alt="Image Detail">
                                </div>
                                <div class="image-detail-info">
                                    <div class="info-group">
                                        <label>File Name:</label>
                                        <span id="detail-filename"></span>
                                    </div>
                                    <div class="info-group">
                                        <label>Original Name:</label>
                                        <span id="detail-originalname"></span>
                                    </div>
                                    <div class="info-group">
                                        <label>Image Type:</label>
                                        <span id="detail-mimetype"></span>
                                    </div>
                                    <div class="info-group">
                                        <label>Size:</label>
                                        <span id="detail-size"></span>
                                    </div>
                                    <div class="info-group">
                                        <label>Upload Date:</label>
                                        <span id="detail-date"></span>
                                    </div>
                                    <div class="info-group">
                                        <label>Reference Type:</label>
                                        <span id="detail-reftype"></span>
                                    </div>
                                    <div class="info-group">
                                        <label>Reference ID:</label>
                                        <span id="detail-refid"></span>
                                    </div>
                                    <div class="info-group">
                                        <label>Is Main Image:</label>
                                        <span id="detail-ismain"></span>
                                    </div>
                                    <div class="info-group">
                                        <label>Image URL:</label>
                                        <div class="copy-url-container">
                                            <input type="text" id="detail-url" readonly>
                                            <button id="copy-url-btn" class="btn-small">
                                                <i class="fas fa-copy"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn-secondary" id="close-detail-btn">Close</button>
                            <button class="btn-danger" id="delete-image-btn">Delete Image</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Customers Content -->
            <div class="content-section hidden" id="customers">
                <h1 class="page-title">Customers Management</h1>
                
                <div class="action-bar">
                    <button class="add-new-btn" id="add-customer-btn" style="display: none;">
                        <i class="fas fa-plus"></i>
                        Add New Customer
                    </button>
                    <div class="filter-group">
                        <select class="filter-select" id="customer-status-filter">
                            <option value="all">All Roles</option>
                            <option value="user">User</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <div class="search-container">
                        <input type="text" placeholder="Search customers..." id="customer-search">
                        <i class="fas fa-search"></i>
                    </div>
                </div>
                
                <div class="table-container">
                    <table class="data-table" id="customers-table">
                        <thead>
                            <tr>
                                <th><input type="checkbox" class="select-all-checkbox"></th>
                                <th>Customer ID</th>
                                <th>Name</th>
                                <th>Phone</th>
                                <th>Address</th>
                                <th>Role</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Customers will be loaded dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Order Details -->
    <div class="modal" id="order-details-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Order Details #<span id="order-id"></span></h3>
                <button class="close-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="order-details-container">
                    <div class="order-info-section">
                        <div class="info-group">
                            <h4>Order Information</h4>
                            <div class="info-row">
                                <span>Order ID:</span>
                                <span id="modal-order-id"></span>
                            </div>
                            <div class="info-row">
                                <span>Date:</span>
                                <span id="modal-order-date"></span>
                            </div>
                            <div class="info-row">
                                <span>Status:</span>
                                <span id="modal-order-status"></span>
                            </div>
                            <div class="info-row">
                                <span>Update Status:</span>
                                <select id="status-select" class="form-control">
                                    <option value="pending">Pending</option>
                                    <option value="processing">Processing</option>
                                    <option value="completed">Completed</option>
                                    <option value="delivered">Delivered</option>
                                    <option value="cancelled">Cancelled</option>
                                </select>
                            </div>
                            <div class="info-row">
                                <span>Payment Method:</span>
                                <span>Cash on Delivery</span>
                            </div>
                        </div>
                        <div class="info-group">
                            <h4>Customer Information</h4>
                            <div class="info-row">
                                <span>Name:</span>
                                <span id="modal-customer-name">Khách hàng</span>
                            </div>
                            <div class="info-row">
                                <span>Phone:</span>
                                <span id="modal-customer-phone">0383051321</span>
                            </div>
                            <div class="info-row">
                                <span>Address:</span>
                                <span id="modal-customer-address">Ha Noi</span>
                            </div>
                        </div>
                    </div>
                    <div class="order-items-section">
                        <h4>Order Items</h4>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Product</th>
                                        <th>Price</th>
                                        <th>Quantity</th>
                                        <th>Total</th>
                                    </tr>
                                </thead>
                                <tbody id="modal-order-items">
                                    <!-- Order items will be loaded dynamically -->
                                </tbody>
                            </table>
                        </div>
                        <div class="order-summary">
                            <div class="summary-row">
                                <span>Subtotal:</span>
                                <span id="modal-subtotal">0đ</span>
                            </div>
                            <div class="summary-row">
                                <span>Delivery Fee:</span>
                                <span id="modal-delivery-fee">0đ</span>
                            </div>
                            <div class="summary-row">
                                <span>Discount:</span>
                                <span id="modal-discount">-0đ</span>
                            </div>
                            <div class="summary-row total">
                                <span>Total:</span>
                                <span id="modal-total">0đ</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary close-modal">Close</button>
                <button class="btn-warning" id="update-status">Update Status</button>
            </div>
        </div>
    </div>

    <!-- Modal for Add/Edit Product -->
    <div class="modal" id="product-modal">
        <div class="modal-content product-modal-content">
            <div class="modal-header">
                <h3 id="product-modal-title">Add New Product</h3>
            </div>
            <form id="product-form">
                <div class="modal-body">
                    <div class="form-group">
                        <label>Product Name</label>
                        <input type="text" name="name" required>
                    </div>
                    <div class="form-group">
                        <label>Type</label>
                        <input type="text" name="type" required>
                    </div>
                    <div class="form-group">
                        <label>Price (đ)</label>
                        <input type="number" name="price" min="0" required>
                    </div>
                    <div class="form-group">
                        <label>Product Image</label>
                        <input type="file" name="image" accept="image/*">
                        <div class="image-preview" id="product-image-preview" style="margin-top: 10px; display: none;">
                            <img src="" alt="Preview" style="max-width: 100%; max-height: 140px;">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <select name="status" required>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <input type="text" name="description" required>
                    </div>
                    <div class="form-group">
                        <label>Category</label>
                        <input type="text" name="category" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" id="cancel-product-btn">Cancel</button>
                    <button type="submit" class="btn-primary" id="save-product-btn">Save Product</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Category Modal -->
    <div id="category-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Category</h3>
                <button class="close-modal" id="close-category-modal">&times;</button>
            </div>
            <form id="category-form">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="category-name">Name</label>
                        <input type="text" id="category-name" name="name" required />
                    </div>
                    <div class="form-group">
                        <label for="category-status">Status</label>
                        <select id="category-status" name="status">
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary modal-cancel-btn" id="cancel-category-btn" type="button">Cancel</button>
                    <button class="btn-primary" id="save-category-btn" type="submit">Save Category</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Add/Edit Promotion -->
    <div class="modal" id="promotion-modal">
        <div class="modal-content promotion-modal-content">
            <div class="modal-header">
                <h3 id="promotion-modal-title">Add New Promotion</h3>
            </div>
            <form id="promotion-form">
                <div class="modal-body">
                    <div class="form-group">
                        <label>
                            <i class="fas fa-ticket-alt"></i>
                            Promo Code
                        </label>
                        <input type="text" name="code" required placeholder="Enter promotion code">
                    </div>
                    <div class="form-group">
                        <label>
                            <i class="fas fa-info-circle"></i>
                            Description
                        </label>
                        <input type="text" name="description" required placeholder="Enter promotion description">
                    </div>
                    <div class="form-group">
                        <label>
                            <i class="fas fa-percent"></i>
                            Discount
                        </label>
                        <input type="text" name="discount" required placeholder="e.g. 10%">
                    </div>
                    <div class="date-range-group">
                        <div class="form-group">
                            <label>
                                <i class="fas fa-calendar-alt"></i>
                                Start Date
                            </label>
                            <input type="date" name="startDate" required>
                        </div>
                        <div class="form-group">
                            <label>
                                <i class="fas fa-calendar-alt"></i>
                                End Date
                            </label>
                            <input type="date" name="endDate" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>
                            <i class="fas fa-toggle-on"></i>
                            Status
                        </label>
                        <select name="status" required>
                            <option value="active">Active</option>
                            <option value="scheduled">Scheduled</option>
                            <option value="expired">Expired</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-secondary close-modal" id="cancel-promotion-btn">Cancel</button>
                    <button type="submit" class="btn-primary" id="save-promotion-btn">Save Promotion</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Add/Edit Customer -->
    <div class="modal" id="customer-modal">
        <div class="modal-content" onclick="event.stopPropagation();">
            <div class="modal-header">
                <h3 id="customer-modal-title">Add New Customer</h3>
                <button type="button" id="modal-close-x">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="customer-form">
                <div class="modal-body">
                    <div class="form-group">
                        <label><i class="fas fa-user"></i> Full Name</label>
                        <input type="text" name="name" class="form-input" placeholder="Enter customer name">
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-envelope"></i> Email</label>
                        <input type="email" name="email" class="form-input" placeholder="Enter customer email">
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-phone"></i> Phone</label>
                        <input type="tel" name="phone" class="form-input" placeholder="Enter phone number">
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-map-marker-alt"></i> Address</label>
                        <input type="text" name="address" class="form-input" placeholder="Enter customer address">
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-toggle-on"></i> Status</label>
                        <select name="status" class="form-select">
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" id="cancel-customer-btn">Cancel</button>
                    <button type="submit" id="save-customer-btn">Add Customer</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Customer Details -->
    <div class="modal" id="customer-details-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Customer Details: <span id="customer-name"></span></h3>
                <button class="close-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="customer-profile">
                    <div class="customer-avatar-large">
                        <img src="../image/Banner.png" alt="Customer Avatar" id="modal-customer-avatar">
                    </div>
                    <div class="customer-info-details">
                        <div class="info-row">
                            <span>Customer ID:</span>
                            <span id="modal-customer-id"></span>
                        </div>
                        <div class="info-row">
                            <span>Email:</span>
                            <span id="modal-customer-email"></span>
                        </div>
                        <div class="info-row">
                            <span>Phone:</span>
                            <span id="modal-customer-phone"></span>
                        </div>
                        <div class="info-row">
                            <span>Address:</span>
                            <span id="modal-customer-address"></span>
                        </div>
                        <div class="info-row">
                            <span>Status:</span>
                            <span id="modal-customer-status"></span>
                        </div>
                        <div class="info-row">
                            <span>Joined Date:</span>
                            <span id="modal-customer-joined"></span>
                        </div>
                    </div>
                </div>
                
                <div class="customer-stats">
                    <div class="stat-card">
                        <div class="stat-icon orange">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="stat-details">
                            <h3>Total Orders</h3>
                            <p class="stat-number" id="modal-customer-orders">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="stat-details">
                            <h3>Total Spent</h3>
                            <p class="stat-number" id="modal-customer-spent">0 đ</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon blue">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div class="stat-details">
                            <h3>Last Order</h3>
                            <p class="stat-number" id="modal-customer-last-order">N/A</p>
                        </div>
                    </div>
                </div>
                
                <div class="recent-activity">
                    <h4>Recent Orders</h4>
                    <table class="items-table" id="modal-customer-orders-table">
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Date</th>
                                <th>Items</th>
                                <th>Amount</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Customer orders will be loaded dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary close-modal">Close</button>
                <button class="btn-primary" id="edit-customer-btn">Edit Customer</button>
            </div>
        </div>
    </div>

    <!-- Modal for Edit Order -->
    <div class="modal" id="order-modal">
        <div class="modal-content" style="max-width: 480px; border-radius: 18px;">
            <div class="modal-header" style="background: linear-gradient(90deg, #ff8a00 80%, #ffb347 100%); color: #fff; border-radius: 18px 18px 0 0; padding: 22px 28px 12px 28px;">
                <h3 id="order-modal-title">Edit Order</h3>
            </div>
            <form id="order-form">
                <div class="modal-body" style="padding: 28px 28px 10px 28px;">
                    <div class="form-group"><label>Order ID</label><input type="text" name="id" readonly></div>
                    <div class="form-group"><label>Customer ID</label><input type="text" name="customer_id" readonly></div>
                    <div class="form-group"><label>Restaurant ID</label><input type="text" name="restaurant_id" readonly></div>
                    <div class="form-group"><label>Promotion ID</label><input type="text" name="promotion_id" readonly></div>
                    <div class="form-group"><label>Category</label><input type="text" name="category" readonly></div>
                    <div class="form-group"><label>Total Price</label><input type="text" name="total_price" readonly></div>
                    <div class="form-group"><label>Status</label>
                        <select name="status" required>
                            <option value="processing">Processing</option>
                            <option value="completed">Completed</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                    </div>
                    <div class="form-group"><label>Date/Time</label><input type="text" name="date" readonly></div>
                </div>
                <div class="modal-footer" style="display: flex; justify-content: flex-end; gap: 14px; padding: 22px 28px 22px 28px; border-top: 1px solid #eee; background: #fafafa; border-radius: 0 0 18px 18px;">
                    <button type="button" class="btn-secondary" id="cancel-order-btn">Cancel</button>
                    <button type="submit" class="btn-primary" id="save-order-btn">Save</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="admin.js" type="module"></script>
    <script src="customer-handler.js"></script>
    <script src="loaders.js" type="module"></script>
</body>
</html>